# OpenFilz Docker Compose Environment Variables
# Copy this file to .env and modify as needed
#
# Usage:
#   cp .env.example .env
#   # Edit .env with your values
#   docker-compose up -d

# =============================================================================
# Database Configuration
# =============================================================================
DB_NAME=dms_db
DB_USER=dms_user
DB_PASSWORD=dms_password
DB_PORT=5432

# =============================================================================
# OpenFilz API Configuration
# =============================================================================
# Docker image for OpenFilz API
OPENFILZ_API_IMAGE=ghcr.io/openfilz/openfilz-api:latest

# API port exposed on host
API_PORT=8081

# Storage type: 'local' or 'minio'
STORAGE_TYPE=local

# Java options for the API
JAVA_OPTS=-Xmx512m -Xms256m

# CORS allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:4200,http://localhost:80

# =============================================================================
# OpenFilz Web Configuration
# =============================================================================
# Docker image for OpenFilz Web
OPENFILZ_WEB_IMAGE=ghcr.io/openfilz/openfilz-web:latest

# Web port exposed on host
WEB_PORT=80

# API URLs for the web application
API_URL=http://localhost:8081/api/v1
GRAPHQL_URL=http://localhost:8081/graphql/v1

# =============================================================================
# Security Configuration
# Set OPENFILZ_SECURITY_NO_AUTH=false and use --profile auth to enable Keycloak
# =============================================================================
OPENFILZ_SECURITY_NO_AUTH=true

# =============================================================================
# Keycloak Configuration (when using --profile auth)
# =============================================================================
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin
KEYCLOAK_HOSTNAME=localhost
KEYCLOAK_PORT=8180
KEYCLOAK_MANAGEMENT_PORT=9000
KEYCLOAK_REALM=openfilz
KEYCLOAK_CLIENT_ID=openfilz-web
KEYCLOAK_ISSUER_URI=http://keycloak:8080/realms/openfilz
KEYCLOAK_URL=http://localhost:8180

# =============================================================================
# OnlyOffice Configuration (when using --profile onlyoffice)
# Set ONLYOFFICE_ENABLED=true to enable OnlyOffice integration
# =============================================================================
ONLYOFFICE_ENABLED=false
ONLYOFFICE_PORT=8080
ONLYOFFICE_URL=http://onlyoffice
ONLYOFFICE_PUBLIC_URL=http://localhost:8080
ONLYOFFICE_API_BASE_URL=http://openfilz-api:8081
ONLYOFFICE_JWT_SECRET=openfilz-onlyoffice-jwt-secret-2024

# =============================================================================
# OpenSearch Configuration (when using --profile fulltext)
# Set OPENFILZ_FULLTEXT_ACTIVE=true to enable full-text search
# =============================================================================
OPENFILZ_FULLTEXT_ACTIVE=false
OPENSEARCH_PORT=9200
OPENSEARCH_PERF_PORT=9600
OPENSEARCH_DASHBOARDS_PORT=5601

# =============================================================================
# Thumbnail Generation Configuration (when using --profile thumbnails)
# =============================================================================
OPENFILZ_THUMBNAIL_ACTIVE=true
IMGPROXY_PORT=8082
IMGPROXY_URL=http://imgproxy:8080
GOTENBERG_PORT=8083
GOTENBERG_URL=http://gotenberg:3000

# =============================================================================
# mTLS Configuration (when using --profile mtls)
# Enables mutual TLS between ImgProxy and openfilz-api
# Generate certificates first: cd certs && ./generate-mtls-certs.sh
# =============================================================================
# SSL/TLS for openfilz-api
SSL_KEYSTORE_PASSWORD=serverpass
SSL_TRUSTSTORE_PASSWORD=changeit
API_HTTPS_PORT=8443

# mTLS authentication for thumbnail source endpoint
OPENFILZ_THUMBNAIL_MTLS_ACCESS_ENABLED=false
